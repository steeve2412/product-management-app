{"ast":null,"code":"var _jsxFileName = \"/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nconst ProductsList = () => {\n  const [products, setProducts] = useState([]);\n  const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n  const token = localStorage.getItem('token');\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get('http://localhost:4000/api/products');\n        setProducts(response.data);\n      } catch (error) {\n        console.error('Failed to fetch products:', error.response);\n      }\n    };\n    fetchProducts();\n  }, []);\n  const deleteProduct = async productId => {\n    if (!token) {\n      console.error('Not authorized');\n      return;\n    }\n    try {\n      await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setProducts(products.filter(product => product._id !== productId));\n    } catch (error) {\n      console.error('Error deleting product:', error.response);\n    }\n  };\n  const handleAddProductClick = () => {\n    if (!token) {\n      setShowLoginPrompt(true);\n    } else {\n      navigate('/add-product');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, \"Tersano Products\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddProductClick,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, \"Add New Product\"), showLoginPrompt && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-warning mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, \"Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 32\n    }\n  }, \"login\"), \" to add products.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, products.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 mb-3\",\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 33\n    }\n  }, product.description), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 33\n    }\n  }, \"$\", product.price), token && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteProduct(product._id),\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 37\n    }\n  }, \"Delete\")))))));\n};\nexport default ProductsList;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","useNavigate","ProductsList","products","setProducts","showLoginPrompt","setShowLoginPrompt","token","localStorage","getItem","navigate","fetchProducts","response","get","data","error","console","deleteProduct","productId","delete","headers","Authorization","filter","product","_id","handleAddProductClick","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","to","map","key","name","description","price"],"sources":["/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst ProductsList = () => {\n    const [products, setProducts] = useState([]);\n    const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n    const token = localStorage.getItem('token');\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const response = await axios.get('http://localhost:4000/api/products');\n                setProducts(response.data);\n            } catch (error) {\n                console.error('Failed to fetch products:', error.response);\n            }\n        };\n\n        fetchProducts();\n    }, []);\n\n    const deleteProduct = async (productId) => {\n        if (!token) {\n            console.error('Not authorized');\n            return;\n        }\n        try {\n            await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n                headers: { Authorization: `Bearer ${token}` },\n            });\n            setProducts(products.filter(product => product._id !== productId));\n        } catch (error) {\n            console.error('Error deleting product:', error.response);\n        }\n    };\n\n    const handleAddProductClick = () => {\n        if (!token) {\n            setShowLoginPrompt(true);\n        } else {\n            navigate('/add-product');\n        }\n    };\n\n    return (\n        <div className=\"container mt-4\">\n            <h1>Tersano Products</h1>\n            <div className=\"mb-3\">\n                <button onClick={handleAddProductClick} className=\"btn btn-primary\">\n                    Add New Product\n                </button>\n                {showLoginPrompt && (\n                    <div className=\"alert alert-warning mt-2\">\n                        Please <Link to=\"/login\">login</Link> to add products.\n                    </div>\n                )}\n            </div>\n            <div className=\"row\">\n                {products.map((product) => (\n                    <div className=\"col-md-4 mb-3\" key={product._id}>\n                        <div className=\"card h-100\">\n                            <div className=\"card-body\">\n                                <h5 className=\"card-title\">{product.name}</h5>\n                                <p className=\"card-text\">{product.description}</p>\n                                <p className=\"card-text\">${product.price}</p>\n                                {token && (\n                                    <button onClick={() => deleteProduct(product._id)} className=\"btn btn-danger\">\n                                        Delete\n                                    </button>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default ProductsList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}