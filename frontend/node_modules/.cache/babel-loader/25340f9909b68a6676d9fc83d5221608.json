{"ast":null,"code":"var _jsxFileName = \"/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nconst ProductsList = () => {\n  const [products, setProducts] = useState([]);\n  const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n  const token = localStorage.getItem('token');\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const {\n          data\n        } = await axios.get('http://localhost:4000/api/products');\n        setProducts(data);\n      } catch (error) {\n        var _error$response;\n        console.error('Failed to fetch products:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || 'Server error');\n      }\n    };\n    fetchProducts();\n  }, []);\n  const deleteProduct = async productId => {\n    if (!token) {\n      console.error('Not authorized');\n      return;\n    }\n    try {\n      await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setProducts(currentProducts => currentProducts.filter(product => product._id !== productId));\n    } catch (error) {\n      var _error$response2;\n      console.error('Error deleting product:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || 'Server error');\n    }\n  };\n  const handleAddProductClick = () => {\n    if (!token) {\n      setShowLoginPrompt(true);\n    } else {\n      navigate('/add-product');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, \"Tersano Products\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddProductClick,\n    className: `btn ${token ? 'btn-primary' : 'btn-secondary'}`,\n    disabled: !token,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, \"Add New Product\"), showLoginPrompt && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-warning mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, \"Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 32\n    }\n  }, \"login\"), \" to add products.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, products.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 mb-3\",\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, product.description), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 33\n    }\n  }, \"$\", product.price), token && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteProduct(product._id),\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 37\n    }\n  }, \"Delete\")))))));\n};\nexport default ProductsList;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","useNavigate","ProductsList","products","setProducts","showLoginPrompt","setShowLoginPrompt","token","localStorage","getItem","navigate","fetchProducts","data","get","error","_error$response","console","response","deleteProduct","productId","delete","headers","Authorization","currentProducts","filter","product","_id","_error$response2","handleAddProductClick","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","to","map","key","name","description","price"],"sources":["/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst ProductsList = () => {\n    const [products, setProducts] = useState([]);\n    const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n    const token = localStorage.getItem('token');\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const { data } = await axios.get('http://localhost:4000/api/products');\n                setProducts(data);\n            } catch (error) {\n                console.error('Failed to fetch products:', error.response?.data || 'Server error');\n            }\n        };\n        fetchProducts();\n    }, []);\n\n    const deleteProduct = async (productId) => {\n        if (!token) {\n            console.error('Not authorized');\n            return;\n        }\n        try {\n            await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n                headers: { Authorization: `Bearer ${token}` },\n            });\n            setProducts(currentProducts => currentProducts.filter(product => product._id !== productId));\n        } catch (error) {\n            console.error('Error deleting product:', error.response?.data || 'Server error');\n        }\n    };\n\n    const handleAddProductClick = () => {\n        if (!token) {\n            setShowLoginPrompt(true);\n        } else {\n            navigate('/add-product');\n        }\n    };\n\n    return (\n        <div className=\"container mt-4\">\n            <h1>Tersano Products</h1>\n            <div className=\"mb-3\">\n                <button onClick={handleAddProductClick} className={`btn ${token ? 'btn-primary' : 'btn-secondary'}`} disabled={!token}>\n                    Add New Product\n                </button>\n                {showLoginPrompt && (\n                    <div className=\"alert alert-warning mt-2\">\n                        Please <Link to=\"/login\">login</Link> to add products.\n                    </div>\n                )}\n            </div>\n            <div className=\"row\">\n                {products.map(product => (\n                    <div className=\"col-md-4 mb-3\" key={product._id}>\n                        <div className=\"card h-100\">\n                            <div className=\"card-body\">\n                                <h5 className=\"card-title\">{product.name}</h5>\n                                <p className=\"card-text\">{product.description}</p>\n                                <p className=\"card-text\">${product.price}</p>\n                                {token && (\n                                    <button onClick={() => deleteProduct(product._id)} className=\"btn btn-danger\">\n                                        Delete\n                                    </button>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default ProductsList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}