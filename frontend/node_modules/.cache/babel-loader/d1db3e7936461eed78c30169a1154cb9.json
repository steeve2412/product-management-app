{"ast":null,"code":"var _jsxFileName = \"/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nfunction ProductsList() {\n  const [products, setProducts] = useState([]);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  useEffect(() => {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    setIsLoggedIn(!!token);\n    const fetchProducts = async () => {\n      try {\n        // Update the request headers with the authorization token\n        const config = token ? {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        } : {};\n        const {\n          data\n        } = await axios.get('http://localhost:4000/api/products', config);\n        setProducts(data);\n      } catch (error) {\n        console.error('Failed to fetch products:', error.response ? error.response.data : error);\n      }\n    };\n    fetchProducts();\n  }, []);\n  const deleteProduct = async productId => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('No authorization token found');\n        return;\n      }\n      const response = await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // Remove the product from the state to update the UI\n      setProducts(products.filter(product => product._id !== productId));\n      console.log('Delete successful:', response.data);\n    } catch (error) {\n      console.error('Failed to delete product:', error.response ? error.response.data : error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \"Tersano Products\"), isLoggedIn && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/add-product\",\n    className: \"btn btn-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, \"Add Product\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, products.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 mb-3\",\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 33\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, product.description), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, \"$\", product.price), isLoggedIn && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteProduct(product._id),\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 37\n    }\n  }, \"Delete\")))))));\n}\nexport default ProductsList;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","ProductsList","products","setProducts","isLoggedIn","setIsLoggedIn","token","localStorage","getItem","fetchProducts","config","headers","Authorization","data","get","error","console","response","deleteProduct","productId","delete","filter","product","_id","log","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","to","map","key","name","description","price","onClick"],"sources":["/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nfunction ProductsList() {\n    const [products, setProducts] = useState([]);\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n    useEffect(() => {\n        // Check if user is logged in\n        const token = localStorage.getItem('token');\n        setIsLoggedIn(!!token);\n\n        const fetchProducts = async () => {\n            try {\n                // Update the request headers with the authorization token\n                const config = token ? { headers: { Authorization: `Bearer ${token}` } } : {};\n                \n                const { data } = await axios.get('http://localhost:4000/api/products', config);\n                setProducts(data);\n            } catch (error) {\n                console.error('Failed to fetch products:', error.response ? error.response.data : error);\n            }\n        };\n\n        fetchProducts();\n    }, []);\n\n    const deleteProduct = async (productId) => {\n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('No authorization token found');\n                return;\n            }\n\n            const response = await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n\n            // Remove the product from the state to update the UI\n            setProducts(products.filter(product => product._id !== productId));\n            \n            console.log('Delete successful:', response.data);\n        } catch (error) {\n            console.error('Failed to delete product:', error.response ? error.response.data : error);\n        }\n    };\n\n    return (\n        <div className=\"container mt-4\">\n            <h1>Tersano Products</h1>\n            {isLoggedIn && (\n                <div className=\"mb-3\">\n                    <Link to=\"/add-product\" className=\"btn btn-success\">Add Product</Link>\n                </div>\n            )}\n            <div className=\"row\">\n                {products.map(product => (\n                    <div className=\"col-md-4 mb-3\" key={product._id}>\n                        <div className=\"card h-100\">\n                            <div className=\"card-body\">\n                                <h5 className=\"card-title\">{product.name}</h5>\n                                <p className=\"card-text\">{product.description}</p>\n                                <p className=\"card-text\">${product.price}</p>\n                                {isLoggedIn && (\n                                    <button onClick={() => deleteProduct(product._id)} className=\"btn btn-danger\">Delete</button>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default ProductsList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}