{"ast":null,"code":"var _jsxFileName = \"/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nconst ProductsList = () => {\n  const [products, setProducts] = useState([]);\n  const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n  const token = localStorage.getItem('token');\n  const navigate = useNavigate();\n\n  // Fetch products from the server\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const {\n          data\n        } = await axios.get('http://localhost:4000/api/products');\n        setProducts(data);\n      } catch (error) {\n        var _error$response;\n        console.error('Failed to fetch products:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || 'Server error');\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  // Handle deletion of a product\n  const deleteProduct = async productId => {\n    if (!token) {\n      console.error('Not authorized');\n      return;\n    }\n    try {\n      await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setProducts(currentProducts => currentProducts.filter(product => product._id !== productId));\n    } catch (error) {\n      var _error$response2;\n      console.error('Error deleting product:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || 'Server error');\n    }\n  };\n\n  // Navigate to the product management page or show login prompt\n  const handleProductManagementClick = () => {\n    if (!token) {\n      setShowLoginPrompt(true);\n    } else {\n      navigate('/product-management');\n    }\n  };\n\n  // Close the modal\n  const closeModal = () => {\n    setShowLoginPrompt(false);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"Tersano Products\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleProductManagementClick,\n    className: `btn ${token ? 'btn-primary' : 'btn-secondary'}`,\n    disabled: !token,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, \"Product Management\"), showLoginPrompt && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal show\",\n    tabIndex: \"-1\",\n    style: {\n      display: 'block'\n    },\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, \"Login Required\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 37\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, \"Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 43\n    }\n  }, \"login\"), \" to manage products.\"))))), products.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, \"There is nothing to show right now.\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, products.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 mb-3\",\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 37\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 37\n    }\n  }, product.description), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }, \"$\", product.price), token && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteProduct(product._id),\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 41\n    }\n  }, \"Delete\")))))));\n};\nexport default ProductsList;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","useNavigate","ProductsList","products","setProducts","showLoginPrompt","setShowLoginPrompt","token","localStorage","getItem","navigate","fetchProducts","data","get","error","_error$response","console","response","deleteProduct","productId","delete","headers","Authorization","currentProducts","filter","product","_id","_error$response2","handleProductManagementClick","closeModal","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","tabIndex","style","display","type","to","length","map","key","name","description","price"],"sources":["/Users/steevenazareth/product-management-app/frontend/src/components/productsList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst ProductsList = () => {\n    const [products, setProducts] = useState([]);\n    const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n    const token = localStorage.getItem('token');\n    const navigate = useNavigate();\n\n    // Fetch products from the server\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const { data } = await axios.get('http://localhost:4000/api/products');\n                setProducts(data);\n            } catch (error) {\n                console.error('Failed to fetch products:', error.response?.data || 'Server error');\n            }\n        };\n        fetchProducts();\n    }, []);\n\n    // Handle deletion of a product\n    const deleteProduct = async (productId) => {\n        if (!token) {\n            console.error('Not authorized');\n            return;\n        }\n        try {\n            await axios.delete(`http://localhost:4000/api/products/${productId}`, {\n                headers: { Authorization: `Bearer ${token}` },\n            });\n            setProducts(currentProducts => currentProducts.filter(product => product._id !== productId));\n        } catch (error) {\n            console.error('Error deleting product:', error.response?.data || 'Server error');\n        }\n    };\n\n    // Navigate to the product management page or show login prompt\n    const handleProductManagementClick = () => {\n        if (!token) {\n            setShowLoginPrompt(true);\n        } else {\n            navigate('/product-management');\n        }\n    };\n\n    // Close the modal\n    const closeModal = () => {\n        setShowLoginPrompt(false);\n    };\n\n    return (\n        <div className=\"container mt-4\">\n            <h1>Tersano Products</h1>\n            <button onClick={handleProductManagementClick} className={`btn ${token ? 'btn-primary' : 'btn-secondary'}`} disabled={!token}>\n                Product Management\n            </button>\n            {showLoginPrompt && (\n                <div className=\"modal show\" tabIndex=\"-1\" style={{ display: 'block' }} onClick={closeModal}>\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\">Login Required</h5>\n                                <button type=\"button\" className=\"close\" onClick={closeModal}>\n                                    <span>&times;</span>\n                                </button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <p>Please <Link to=\"/login\">login</Link> to manage products.</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n            {products.length === 0 ? (\n                <p className=\"text-center\">There is nothing to show right now.</p>\n            ) : (\n                <div className=\"row\">\n                    {products.map(product => (\n                        <div className=\"col-md-4 mb-3\" key={product._id}>\n                            <div className=\"card h-100\">\n                                <div className=\"card-body\">\n                                    <h5 className=\"card-title\">{product.name}</h5>\n                                    <p className=\"card-text\">{product.description}</p>\n                                    <p className=\"card-text\">${product.price}</p>\n                                    {token && (\n                                        <button onClick={() => deleteProduct(product._id)} className=\"btn btn-danger\">\n                                            Delete\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default ProductsList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}